{"version":3,"sources":["webpack://owl/webpack/universalModuleDefinition","webpack://owl/webpack/bootstrap","webpack://owl/./src/base/config.ts","webpack://owl/./src/base/iosMt.ts","webpack://owl/./src/base/submitPool.ts","webpack://owl/./src/base/tools.ts","webpack://owl/./src/index.js","webpack://owl/./src/lib/def.ts","webpack://owl/./src/lib/err.ts","webpack://owl/./src/lib/fmp.ts","webpack://owl/./src/lib/page.ts","webpack://owl/./src/lib/req.ts","webpack://owl/./src/lib/supper.ts","webpack://owl/./src/regCenter.ts"],"names":["apps","install","config","uaName","Array","isArray","concat","push","regCenter","RegCenter","window","init","errorPush","errorType","errorInfo","errorMsg","undefined","console","error","err","customError","logPush","def","submitDataPush","vueErrorPush","errorKey","errInfo","perfPush","perfObject","Object","keys","length","cfpt","page","saveCustomPerf","e","log"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;QCVA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;;QAGA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;;QAGA;QACA;;;;;;;;;;;;;AClFa;AACb;AACA,2BAA2B,+DAA+D,gBAAgB,EAAE,EAAE;AAC9G;AACA,mCAAmC,MAAM,6BAA6B,EAAE,YAAY,WAAW,EAAE;AACjG,kCAAkC,MAAM,iCAAiC,EAAE,YAAY,WAAW,EAAE;AACpG,+BAA+B,qFAAqF;AACpH;AACA,KAAK;AACL;AACA;AACA,aAAa,6BAA6B,0BAA0B,aAAa,EAAE,qBAAqB;AACxG,gBAAgB,qDAAqD,oEAAoE,aAAa,EAAE;AACxJ,sBAAsB,sBAAsB,qBAAqB,GAAG;AACpE;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC,kCAAkC,SAAS;AAC3C,kCAAkC,WAAW,UAAU;AACvD,yCAAyC,cAAc;AACvD;AACA,6GAA6G,OAAO,UAAU;AAC9H,gFAAgF,iBAAiB,OAAO;AACxG,wDAAwD,gBAAgB,QAAQ,OAAO;AACvF,8CAA8C,gBAAgB,gBAAgB,OAAO;AACrF;AACA,iCAAiC;AACjC;AACA;AACA,SAAS,YAAY,aAAa,OAAO,EAAE,UAAU,WAAW;AAChE,mCAAmC,SAAS;AAC5C;AACA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,mBAAO,CAAC,oCAAS;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD;AACrD;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa,EAAE;AACf;AACA;AACA;AACA;;;;;;;;;;;;;AC1Ia;AACb,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AC/Ca;AACb;AACA;AACA,gDAAgD,OAAO;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,+DAA+D,gBAAgB,EAAE,EAAE;AAC9G;AACA,mCAAmC,MAAM,6BAA6B,EAAE,YAAY,WAAW,EAAE;AACjG,kCAAkC,MAAM,iCAAiC,EAAE,YAAY,WAAW,EAAE;AACpG,+BAA+B,qFAAqF;AACpH;AACA,KAAK;AACL;AACA;AACA,aAAa,6BAA6B,0BAA0B,aAAa,EAAE,qBAAqB;AACxG,gBAAgB,qDAAqD,oEAAoE,aAAa,EAAE;AACxJ,sBAAsB,sBAAsB,qBAAqB,GAAG;AACpE;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC,kCAAkC,SAAS;AAC3C,kCAAkC,WAAW,UAAU;AACvD,yCAAyC,cAAc;AACvD;AACA,6GAA6G,OAAO,UAAU;AAC9H,gFAAgF,iBAAiB,OAAO;AACxG,wDAAwD,gBAAgB,QAAQ,OAAO;AACvF,8CAA8C,gBAAgB,gBAAgB,OAAO;AACrF;AACA,iCAAiC;AACjC;AACA;AACA,SAAS,YAAY,aAAa,OAAO,EAAE,UAAU,WAAW;AAChE,mCAAmC,SAAS;AAC5C;AACA;AACA,8CAA8C,cAAc;AAC5D,cAAc,mBAAO,CAAC,oCAAS;AAC/B,eAAe,mBAAO,CAAC,sCAAU;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sGAAsG,EAAE;AACxG;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,8BAA8B;AAC9B;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0DAA0D;AAC1D;AACA;AACA;AACA;AACA,2CAA2C,iBAAiB;AAC5D,kEAAkE;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA;AACA,CAAC;AACD;AACA;;;;;;;;;;;;;ACrKa;AACb;AACA,iDAAiD,QAAQ;AACzD,wCAAwC,QAAQ;AAChD,wDAAwD,QAAQ;AAChE;AACA;AACA;AACA,8CAA8C,cAAc;AAC5D,eAAe,mBAAO,CAAC,sCAAU;AACjC,cAAc,mBAAO,CAAC,oCAAS;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iGAAiG;AACjG,kDAAkD,GAAG,IAAI,mBAAmB;AAC5E;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,uBAAuB;AACnD;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,4CAA4C;AAC5C,wBAAwB;AACxB;AACA;AACA,kDAAkD;AAClD,wBAAwB;AACxB;AACA,oBAAoB;AACpB,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,8CAA8C;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,iCAAiC,UAAU;AAC3C;AACA;AACA;AACA,2BAA2B,SAAS;AACpC;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,6DAA6D,KAAK;AAClE;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,mDAAmD,KAAK,2BAA2B,KAAK;AACxF;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,qCAAqC,IAAI;AACzC,yCAAyC,IAAI;AAC7C,uCAAuC,KAAK;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,kBAAkB;AAC3D;AACA,+BAA+B,wBAAwB;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA,wBAAwB,uCAAuC;AAC/D;AACA,2CAA2C,GAAG;AAC9C;AACA;AACA;AACA,uCAAuC,SAAS;AAChD;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,QAAQ;AAC9B;AACA;AACA;AACA,sBAAsB,QAAQ;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,uCAAuC,kBAAkB;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,6BAA6B,EAAE;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,CAAC;AACD;;;;;;;;;;;;;;;;;;;ACzhBA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;AAEA,IAAIA,OAAO,CAAC,QAAD,CAAX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAvBA;;;;;;;;AAyBA,SAASC,OAAT,GAA8B;AAAA,MAAbC,MAAa,uEAAJ,EAAI;;AAC5B,MAAI;AACF,QAAIA,OAAOC,MAAX,EAAmB;AACjBC,YAAMC,OAAN,CAAcH,OAAOC,MAArB,IACKH,OAAOA,KAAKM,MAAL,CAAYJ,OAAOC,MAAnB,CADZ,GAEIH,KAAKO,IAAL,CAAUL,OAAOC,MAAjB,CAFJ;AAGD;;AAED,QAAIK,YAAY,IAAIC,mBAAJ,CAAcC,MAAd,CAAhB;AACAF,cAAUG,IAAV,CAAeT,MAAf;AACA,WAAO;AACL;;;;;;AAMAU,eAPK,2BAOmD;AAAA,YAA5CC,SAA4C,QAA5CA,SAA4C;AAAA,kCAAjCC,SAAiC;AAAA,YAAjCA,SAAiC,kCAArB,EAAqB;AAAA,iCAAjBC,QAAiB;AAAA,YAAjBA,QAAiB,iCAAN,EAAM;;AACtD,YAAIC,cAAcH,SAAd,IAA2BG,cAAcF,SAA7C,EAAwD;AACtDG,kBAAQC,KAAR,CAAc,sCAAd;AACA;AACD;AACDC,sBAAIC,WAAJ,CAAgBP,SAAhB,EAA2BC,SAA3B,EAAsCC,QAAtC;AACD,OAbI;AAcLM,aAdK,mBAcGP,SAdH,EAcc;AACjBQ,sBAAIC,cAAJ,CAAmBT,SAAnB;AACD,OAhBI;;AAiBL;AACAU,kBAlBK,wBAkBQC,QAlBR,EAkBkBC,OAlBlB,EAkB2B;AAC9BP,sBAAII,cAAJ,CAAmBE,QAAnB,EAA6BC,OAA7B;AACD,OApBI;;AAqBL;;;;AAIAC,cAzBK,oBAyBIC,UAzBJ,EAyBgB;AACnB,YAAIC,OAAOC,IAAP,CAAYF,UAAZ,EAAwBG,MAAxB,IAAkCH,WAAWI,IAAjD,EAAuD;AACrDC,yBAAKC,cAAL,CAAoBN,UAApB;AACD;AACF;AA7BI,KAAP;AA+BD,GAxCD,CAwCE,OAAOO,CAAP,EAAU;AACVlB,YAAQmB,GAAR,YAAqBD,CAArB;AACD;AACF;AACDzB,OAAO,eAAP,IAA0BT,OAA1B;kBACeA,O;;;;;;;;;;;;ACvEF;AACb;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD,8CAA8C,cAAc;AAC5D,mBAAmB,mBAAO,CAAC,oDAAoB;AAC/C,eAAe,mBAAO,CAAC,qCAAU;AACjC,cAAc,mBAAO,CAAC,0CAAe;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;;;;;;;;;;;;;AChDa;AACb;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD,8CAA8C,cAAc;AAC5D,cAAc,mBAAO,CAAC,0CAAe;AACrC,mBAAmB,mBAAO,CAAC,oDAAoB;AAC/C,eAAe,mBAAO,CAAC,qCAAU;AACjC,eAAe,mBAAO,CAAC,4CAAgB;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,WAAW;AACzC,6BAA6B,UAAU;AACvC;AACA,gCAAgC,sDAAsD;AACtF;AACA;AACA;AACA,eAAe,EAAE;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA,eAAe,EAAE;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,8CAA8C;AAC7E;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B;AAC/B,mCAAmC;AACnC;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;;;;;;;;;;;;;ACtOa;AACb,8CAA8C,cAAc;AAC5D,cAAc,mBAAO,CAAC,0CAAe;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,OAAO;AAC/C,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uEAAuE,QAAQ;AAC/E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,2CAA2C,4BAA4B;AACvE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,uBAAuB;AACvB;AACA;AACA;AACA,kDAAkD;AAClD;AACA;AACA;AACA,oBAAoB,qCAAqC;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;;;;;;AC/Sa;AACb;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA,gDAAgD,OAAO;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C,cAAc;AAC5D,eAAe,mBAAO,CAAC,qCAAU;AACjC,mBAAmB,mBAAO,CAAC,oDAAoB;AAC/C,cAAc,mBAAO,CAAC,0CAAe;AACrC,eAAe,mBAAO,CAAC,4CAAgB;AACvC,YAAY,mBAAO,CAAC,+BAAO;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mHAAmH;AACnH,2DAA2D;AAC3D,6DAA6D;AAC7D,6DAA6D;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gHAAgH,oBAAoB,gBAAgB;AACpJ,yBAAyB;AACzB;AACA;AACA,yBAAyB;AACzB;AACA;AACA,mGAAmG;AACnG;AACA,iBAAiB;AACjB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;;;;;;;;;;;;;AC/Pa;AACb;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD,8CAA8C,cAAc;AAC5D,mBAAmB,mBAAO,CAAC,oDAAoB;AAC/C,YAAY,mBAAO,CAAC,+BAAO;AAC3B,eAAe,mBAAO,CAAC,4CAAgB;AACvC,eAAe,mBAAO,CAAC,qCAAU;AACjC,cAAc,mBAAO,CAAC,0CAAe;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,EAAE,GAAG,EAAE;AACzC,2BAA2B,EAAE,GAAG,EAAE;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wEAAwE;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;;;;;;AClHa;AACb,8CAA8C,cAAc;AAC5D,mBAAmB,mBAAO,CAAC,oDAAoB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;;;;;;ACvBa;AACb,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,mBAAO,CAAC,yCAAc;AACpC,eAAe,mBAAO,CAAC,2CAAe;AACtC,aAAa,mBAAO,CAAC,qCAAY;AACjC,YAAY,mBAAO,CAAC,mCAAW;AAC/B,YAAY,mBAAO,CAAC,mCAAW;AAC/B,YAAY,mBAAO,CAAC,mCAAW;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4EAA4E;AAC5E;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD","file":"owl-sdk-0.1.34.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"owl\"] = factory();\n\telse\n\t\troot[\"owl\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/index.js\");\n","\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n/*\r\n * @Author: your name\r\n * @Date: 2019-07-30 21:19:29\r\n * @LastEditTime : 2019-12-26 10:11:52\r\n * @LastEditors  : Please set LastEditors\r\n * @Description: In User Settings Edit\r\n * @FilePath: \\EVO\\owl-sdk\\src\\base\\config.ts\r\n */\r\nvar tools_1 = require(\"./tools\");\r\nvar config = {\r\n    __requestUrl: \"https://nlogtj.xx.cc/log/performance\",\r\n    __key: \"\",\r\n    __submitLimit: 1,\r\n    __slowReqTime: 800,\r\n    __pvRatio: 10,\r\n    __urlHelper: null,\r\n    __filterErrors: [\r\n        // /^Script error\\.?$/,\r\n        \"Script error\",\r\n        /^Javascript error: Script error\\.? on line 0$/\r\n    ],\r\n    __ignoreUrlKeyWord: [\"127.0.0.1\", \"localhost\", \"sockjs-node\"],\r\n    __isPvRatio: true,\r\n    __useFMP: true,\r\n    __debug: false,\r\n    __submitHook: null,\r\n    __hookData: null,\r\n    setConfig: function (userConfig) {\r\n        var _this = this;\r\n        config.__requestUrl = userConfig.requestUrl || config.__requestUrl;\r\n        config.__key = userConfig.key || config.__key;\r\n        config.__submitLimit = userConfig.submitLimit || config.__submitLimit;\r\n        config.__urlHelper = userConfig.urlHelper;\r\n        config.__slowReqTime = userConfig.slowReqTime || config.__slowReqTime;\r\n        config.__debug = userConfig.__debug || config.__debug;\r\n        config.__useFMP = userConfig.__debug\r\n            ? true\r\n            : userConfig.useFMP || config.__useFMP;\r\n        //var DEFAULT_IGNORE_ERRORS = [/^Script error\\.?$/, /^Javascript error: Script error\\.? on line 0$/];\r\n        //只有设置抽样值大于10才生效。如果抽样式值小于10按10处理。\r\n        if (userConfig[\"isPvRatio\"] === false && !userConfig[\"__debug\"]) {\r\n            config.__isPvRatio = false;\r\n        }\r\n        if (userConfig[\"pvRatio\"] &&\r\n            typeof userConfig[\"pvRatio\"] === \"number\" &&\r\n            userConfig[\"pvRatio\"] > config.__pvRatio) {\r\n            config.__pvRatio = userConfig[\"pvRatio\"];\r\n        }\r\n        config.__filterErrors = config.__filterErrors.concat(tools_1.default.checkStrOrArray(userConfig.filterErrors));\r\n        config.__ignoreUrlKeyWord = config.__debug\r\n            ? []\r\n            : config.__ignoreUrlKeyWord.concat(tools_1.default.checkStrOrArray(userConfig.ignoreUrlKeyWord));\r\n        //处理用户提交钩子方法。\r\n        if (userConfig.submitHook) {\r\n            config.__submitHook = function () { return __awaiter(_this, void 0, void 0, function () {\r\n                var hookFunType, hookData, e_1;\r\n                return __generator(this, function (_a) {\r\n                    switch (_a.label) {\r\n                        case 0:\r\n                            if (config.__hookData) {\r\n                                return [2 /*return*/, config.__hookData];\r\n                            }\r\n                            hookFunType = tools_1.default.getType(userConfig.submitHook);\r\n                            if (!(hookFunType === \"function\")) return [3 /*break*/, 5];\r\n                            hookData = null;\r\n                            _a.label = 1;\r\n                        case 1:\r\n                            _a.trys.push([1, 3, , 4]);\r\n                            return [4 /*yield*/, userConfig.submitHook()];\r\n                        case 2:\r\n                            hookData = _a.sent();\r\n                            return [3 /*break*/, 4];\r\n                        case 3:\r\n                            e_1 = _a.sent();\r\n                            return [2 /*return*/, null];\r\n                        case 4:\r\n                            if (hookData) {\r\n                                if (tools_1.default.getType(hookData) === \"object\") {\r\n                                    config.__hookData = hookData;\r\n                                }\r\n                                else {\r\n                                    config.__hookData = { userDef: hookData };\r\n                                }\r\n                            }\r\n                            return [3 /*break*/, 6];\r\n                        case 5:\r\n                            if (hookFunType === \"object\") {\r\n                                config.__hookData = userConfig.submitHook;\r\n                            }\r\n                            else {\r\n                                config.__hookData = { userDef: userConfig.submitHook };\r\n                            }\r\n                            _a.label = 6;\r\n                        case 6: return [2 /*return*/, config.__hookData];\r\n                    }\r\n                });\r\n            }); };\r\n        }\r\n    }\r\n};\r\nexports.default = config;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar devices = {\r\n    \"Apple A7 GPU\": {\r\n        1136: \"iPhone5/5s\",\r\n        2048: \"iPadAir/iPadMini2/3\"\r\n    },\r\n    \"Apple A8 GPU\": {\r\n        1334: \"iPhone6\",\r\n        2208: \"iPhone6Plus\",\r\n        2048: \"iPadAir2/4\"\r\n    },\r\n    \"Apple A9 GPU\": {\r\n        1136: \"iPhoneSE\",\r\n        1334: \"iPhone6s\",\r\n        2208: \"iPhone6sPlus\"\r\n    },\r\n    \"Apple A10 GPU\": {\r\n        1334: \"iPhone7\",\r\n        2208: \"iPhone7Plus\"\r\n    },\r\n    \"Apple A11 GPU\": {\r\n        1334: \"iPhone8\",\r\n        2208: \"iPhone8Plus\",\r\n        2436: \"iPhoneX\"\r\n    },\r\n    \"Apple A12 GPU\": {\r\n        2436: \"iPhoneXS\",\r\n        2688: \"iPhoneXSMAX\",\r\n        1792: \"iphoneXR\"\r\n    }\r\n};\r\nfunction getModel() {\r\n    try {\r\n        var gl = document\r\n            .createElement(\"canvas\")\r\n            .getContext(\"experimental-webgl\");\r\n        var gpu = gl.getParameter(gl.getExtension(\"WEBGL_debug_renderer_info\").UNMASKED_RENDERER_WEBGL);\r\n        var sw = Math.max(window.screen.width, window.screen.height) *\r\n            (window.devicePixelRatio || 1);\r\n        return devices[gpu][sw] || \"ios未知\";\r\n    }\r\n    catch (e) {\r\n        console.log(e);\r\n    }\r\n    return \"ios未知\";\r\n}\r\nexports.default = getModel();\r\n","\"use strict\";\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar tools_1 = require(\"./tools\");\r\nvar config_1 = require(\"./config\");\r\nvar SubmitPool = /** @class */ (function () {\r\n    function SubmitPool() {\r\n        //没有错误数据，间隔提交时间变长\r\n        this.STEP = 2000;\r\n        //1分钟双倍增长值\r\n        this.MAX_DOUBLE_STEP = 60000;\r\n        //上报间隔最大10分钟\r\n        this.MAX_STEP = 60000;\r\n        this.LIMIT = 1;\r\n        //防止提交重复，或者堵塞。\r\n        this.startStatus = false;\r\n        this.dataPool = [];\r\n        this.tools = {};\r\n        this.tools = tools_1.default;\r\n    }\r\n    /**\r\n     * 错误上报提交处理\r\n     */\r\n    SubmitPool.prototype.start = function () {\r\n        var that = this;\r\n        if (this.startStatus) {\r\n            return;\r\n        }\r\n        this.LIMIT = config_1.default.__submitLimit; //每次提交个数\r\n        this.startStatus = true;\r\n        var SUBMIT_TIME = 6000;\r\n        var reportSubmit = function () {\r\n            setTimeout(function () {\r\n                var submitDatas = [];\r\n                var stepAdd = function () {\r\n                    if (SUBMIT_TIME < that.MAX_STEP) {\r\n                        if (SUBMIT_TIME > that.MAX_DOUBLE_STEP) {\r\n                            //超过一分钟间隔时间成倍增长\r\n                            SUBMIT_TIME *= 2;\r\n                        }\r\n                        else {\r\n                            //个分钟之内进行步长计算\r\n                            SUBMIT_TIME += that.STEP;\r\n                        }\r\n                    }\r\n                };\r\n                if (that.dataPool.length > 0) {\r\n                    var limit = that.dataPool.length - that.LIMIT\r\n                        ? that.LIMIT\r\n                        : that.dataPool.length;\r\n                    submitDatas = that.dataPool.splice(0, limit);\r\n                    that.tools[\"zybajax\"](config_1.default.__requestUrl, submitDatas, function (res) { }, function () {\r\n                        //alert(\"失败\")\r\n                        //如果提交失败，则需要放回数据池，并放到队列后边。\r\n                        that.dataPool = that.dataPool.concat(submitDatas);\r\n                    });\r\n                }\r\n                else {\r\n                    stepAdd(); //增加步长操作\r\n                }\r\n                reportSubmit();\r\n            }, SUBMIT_TIME);\r\n        };\r\n        reportSubmit();\r\n    };\r\n    /**\r\n     * 增加数据到相应的数据池中。\r\n     * 如果设置每次提交一条数据，则直接进行提交。\r\n     */\r\n    SubmitPool.prototype.pushDatas = function (data) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var _hookData, _a, newData, i;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0:\r\n                        _a = config_1.default.__submitHook;\r\n                        if (!_a) return [3 /*break*/, 2];\r\n                        return [4 /*yield*/, config_1.default.__submitHook()];\r\n                    case 1:\r\n                        _a = (_b.sent());\r\n                        _b.label = 2;\r\n                    case 2:\r\n                        _hookData = _a;\r\n                        if ((tools_1.default.getType(data) === \"object\" && this.dataPool.length == 0) &&\r\n                            this.LIMIT <= 1) {\r\n                            newData = __assign(__assign({}, data), _hookData);\r\n                            this.pushData(newData);\r\n                        }\r\n                        else {\r\n                            if (Array.isArray(data)) {\r\n                                for (i = 0; i < data.length; i++) {\r\n                                    data[i] = __assign(__assign({}, data[i]), _hookData);\r\n                                }\r\n                                this.dataPool = this.dataPool.concat(data);\r\n                            }\r\n                            else {\r\n                                this.dataPool.push(data);\r\n                            }\r\n                        }\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    SubmitPool.prototype.pushData = function (data) {\r\n        var _this = this;\r\n        if (config_1.default.__debug) {\r\n            tools_1.default.log(data);\r\n            return;\r\n        }\r\n        this.tools[\"zybajax\"](config_1.default.__requestUrl, data, function (res) {\r\n            console.log(res);\r\n        }, function (e) {\r\n            _this.dataPool.push(data);\r\n        });\r\n    };\r\n    return SubmitPool;\r\n}());\r\nvar submitPool = new SubmitPool();\r\nexports.default = submitPool;\r\n","\"use strict\";\r\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar config_1 = require(\"./config\");\r\nvar iosMt_1 = require(\"./iosMt\");\r\nvar win = window;\r\nvar doc = document;\r\nvar tools = (function () {\r\n    return {\r\n        /**\r\n         * window是否ready;\r\n         */\r\n        hasReady: false,\r\n        /**\r\n         * url对像，url+参数\r\n         */\r\n        URLS: window.location.href.split(\"?\"),\r\n        /**\r\n         * 代理头信息\r\n         */\r\n        AGENT: navigator.userAgent,\r\n        /**\r\n         *获取系统平台(ios/android/other)\r\n         **/\r\n        getSysPlat: function () {\r\n            var isAndroid = this.AGENT.indexOf(\"Android\") > -1 || this.AGENT.indexOf(\"Adr\") > -1; //android终端\r\n            var isIos = !!this.AGENT.match(/\\(i[^;]+;( U;)? CPU.+Mac OS X/); //ios终端\r\n            return isAndroid || isIos || \"Other\";\r\n        },\r\n        getType: function (tag) {\r\n            return Object.prototype.toString\r\n                .call(tag)\r\n                .replace(/(\\[|\\]|object)/g, \"\")\r\n                .trim()\r\n                .toLocaleLowerCase();\r\n        },\r\n        /**\r\n         * 获取用户代理信息\r\n         */\r\n        getAent: function () {\r\n            return this.AGENT;\r\n        },\r\n        /**\r\n         * debug打印\r\n         * @param arg\r\n         */\r\n        log: function () {\r\n            var arg = [];\r\n            for (var _i = 0; _i < arguments.length; _i++) {\r\n                arg[_i] = arguments[_i];\r\n            }\r\n            config_1.default.__debug && console.log.apply(console, __spreadArrays([\"[owl-sdk-debug] now:\" + window.performance.now()], arg));\r\n        },\r\n        isAndroid: function () {\r\n            return \"Android\" === this.getSysPlat();\r\n        },\r\n        isIos: function () {\r\n            return \"Ios\" === this.getSysPlat();\r\n        },\r\n        /**\r\n         *获取操作系统版本号\r\n         **/\r\n        getSysVersion: function () {\r\n            if (this.isAndroid()) {\r\n                var av = this.AGENT.split(\";\")[1].match(/\\d+/g) || [];\r\n                return { vd: av.join(\".\"), vm: av[0] };\r\n            }\r\n            if (this.isIos()) {\r\n                var OSVision = this.AGENT.split(\";\")[1].match(/(\\d+)_(\\d+)_?(\\d+)?/)[0];\r\n                return { vd: OSVision, vm: OSVision.split(\"_\")[0] };\r\n            }\r\n            return { vd: \"1.0\", vm: \"1\" };\r\n        },\r\n        /**\r\n         *获取手机品牌\r\n         *此方法前台执行需下载一个适配js，比较大，放后台进行处理\r\n         **/\r\n        getPhoneBrand: function () {\r\n            if (this.isAndroid()) {\r\n                var reg = /Android[^\\(\\)]*?;\\s*([^\\(\\)]*?)Build/;\r\n                var brands = reg.exec(this.AGENT);\r\n                if (brands && brands.length && brands.length >= 2) {\r\n                    return brands[1].trim();\r\n                }\r\n            }\r\n            if (this.isIos()) {\r\n                return iosMt_1.default;\r\n            }\r\n            return \"other\";\r\n        },\r\n        /**\r\n         *获取运行平台(微信，qq ,微博，浏览器<uc,......>)\r\n         **/\r\n        getRunPlat: function () {\r\n            var ua = this.AGENT.toUpperCase(); //获取判断用的对象\r\n            //作业绑平台\r\n            if (ua.match(/PARENT/i)) {\r\n                return \"PARENT\";\r\n            }\r\n            if (ua.match(/HOMEWORK/i)) {\r\n                return \"HOMEWORK\";\r\n            }\r\n            if (ua.match(/AIRCLASS/i)) {\r\n                return \"AIRCLASS\";\r\n            }\r\n            if (ua.match(/MICROMESSENGER/i)) {\r\n                return \"WX\";\r\n            }\r\n            if (ua.match(/WEIBO/i)) {\r\n                return \"WB\";\r\n            }\r\n            if (ua.match(/QQ/i)) {\r\n                return \"QQ\";\r\n            }\r\n            return \"OTHER\";\r\n        },\r\n        /**\r\n         *获取url\r\n         **/\r\n        getUrl: function () {\r\n            if (config_1.default.__urlHelper) {\r\n                var reBuildUrlFun = config_1.default.__urlHelper;\r\n                if (Object.prototype.toString.call(reBuildUrlFun) === \"[object Function]\") {\r\n                    var rebuild = reBuildUrlFun(this.URLS[0]) || this.URLS[0];\r\n                    if (rebuild.indexOf(\"?\") !== -1) {\r\n                        console.error(\"[\" + rebuild + \"] \\u8BE5URL\\u4E0D\\u7B26\\u5408\\u89C4\\u8303\\uFF01\");\r\n                    }\r\n                    return rebuild.split(\"?\")[0];\r\n                }\r\n                else {\r\n                    console.error(\"urlHelper is not Function\");\r\n                }\r\n            }\r\n            return this.URLS[0];\r\n        },\r\n        /**\r\n         * 获取跳转来源\r\n         */\r\n        getReferrer: function () {\r\n            return document.referrer;\r\n        },\r\n        /**\r\n         * 取两位小数\r\n         * @param v\r\n         */\r\n        toFixed2: function (v) {\r\n            return Math.round(v * 100) / 100;\r\n        },\r\n        /**\r\n         *获取url自带参数清单\r\n         **/\r\n        getUrlParams: function (key) {\r\n            var rtObj = Object.create(null);\r\n            if (this.URLS.length > 1) {\r\n                var params = this.URLS[1].split(\"&\");\r\n                params.forEach(function (v) {\r\n                    var ps = v.split(\"=\");\r\n                    rtObj[ps[0]] = ps[1] || \"\";\r\n                });\r\n            }\r\n            if (key) {\r\n                return rtObj[key] ? rtObj[key] : \"\";\r\n            }\r\n            return rtObj;\r\n        },\r\n        /**\r\n         * @param len 产生指定位数据的随机字符串\r\n         */\r\n        getUUID: function (len) {\r\n            if (len === void 0) { len = 32; }\r\n            var chars = \"ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz1234567890\";\r\n            var maxPos = chars.length;\r\n            var pwd = [];\r\n            for (var i = 0; i < len; i++) {\r\n                pwd.push(chars.charAt(Math.floor(Math.random() * maxPos)));\r\n            }\r\n            return pwd.join(\"\");\r\n        },\r\n        /**\r\n         * 用来在localStorage中记录uid\r\n         */\r\n        getUvId: function () {\r\n            var prefix = \"Zyb_jzb_webapp_owl\";\r\n            var storage = localStorage.getItem(prefix);\r\n            // const store = storage ? JSON.parse(storage) : {};\r\n            // let val = store[prefix];\r\n            if (!storage) {\r\n                storage = this.getUUID(16);\r\n                localStorage.setItem(prefix, storage);\r\n            }\r\n            return storage;\r\n        },\r\n        /**\r\n         * 获取用户端当前网络信息\r\n         */\r\n        getNetWork: function () {\r\n            return ((navigator[\"connection\"] && navigator[\"connection\"].effectiveType) ||\r\n                \"未知\");\r\n        },\r\n        /**\r\n         * 获取浏览器信息\r\n         */\r\n        getBI: function () {\r\n            var Sys = Object.create(null);\r\n            var ua = this.AGENT.toLowerCase();\r\n            var re = /(msie|firefox|chrome|opera|version).*?([\\d.]+)/;\r\n            var m = ua.match(re);\r\n            if (m && m.length) {\r\n                Sys[\"br\"] = m[1].replace(/version/, \"safari\");\r\n                Sys[\"brv\"] = m[2];\r\n            }\r\n            else {\r\n                Sys[\"br\"] = \"other\";\r\n                Sys[\"brv\"] = \"\";\r\n            }\r\n            return Sys;\r\n        },\r\n        /**\r\n         * 获取cookie值\r\n         * @param name\r\n         */\r\n        getCookieV: function (name) {\r\n            var arr, reg = new RegExp(\"(^| )\" + name + \"=([^;]*)(;|$)\");\r\n            if ((arr = document.cookie.match(reg))) {\r\n                return unescape(arr[2]);\r\n            }\r\n            else {\r\n                return null;\r\n            }\r\n        },\r\n        /**\r\n         * 获取指定url的域信息\r\n         */\r\n        getHost: function (url) {\r\n            var host = \"\";\r\n            var hostReg = /[a-zA-Z0-9][-a-zA-Z0-9]{0,62}(\\.[a-zA-Z0-9][-a-zA-Z0-9]{0,62})+\\.?/;\r\n            var hostArray = url.match(hostReg);\r\n            if (hostArray && hostArray.length) {\r\n                host = hostArray[0];\r\n            }\r\n            return host;\r\n        },\r\n        /**\r\n         * 获取当前运行环境\r\n         */\r\n        getJRE: function (urlParams) {\r\n            var testReg = /test[0-9]{0,5}\\.xx/;\r\n            var qaTestReg = /qatest[0-9]{0,5}\\.xx/;\r\n            var prodReg = /[a-zA-Z0-9]{0,20}\\.xx/;\r\n            var host = this.getHost(this.getUrl());\r\n            if (host.length) {\r\n                if (testReg.test(host)) {\r\n                    return \"dev\";\r\n                }\r\n                if (qaTestReg.test(host)) {\r\n                    return \"test\";\r\n                }\r\n                if (prodReg.test(host)) {\r\n                    if ((urlParams && urlParams[\"__tips__\"]) ||\r\n                        this.getCookieV(\"__tips__\") ||\r\n                        this.getCookieV(\"tips\")) {\r\n                        return \"tips\";\r\n                    }\r\n                    return \"prod\";\r\n                }\r\n            }\r\n            return \"other\";\r\n        },\r\n        /**\r\n         * 合并对像，主要兼容Object.assign方法在ios8上的使用。\r\n         * @param t\r\n         * @param o\r\n         */\r\n        assign: function (t, o) {\r\n            if (Object[\"assign\"]) {\r\n                return Object[\"assign\"](t, o);\r\n            }\r\n            else {\r\n                for (var p in o) {\r\n                    if (o.hasOwnProperty(p) && !t.hasOwnProperty(p))\r\n                        t[p] = o[p];\r\n                }\r\n                return t;\r\n            }\r\n        },\r\n        /**\r\n         * 检查字符串&数组，并最终返回数组。\r\n         * @param v\r\n         */\r\n        checkStrOrArray: function (v) {\r\n            if (undefined != v) {\r\n                var t = v.constructor.name.toLocaleUpperCase();\r\n                if (t === \"STRING\") {\r\n                    return [v];\r\n                }\r\n                else if (t === \"ARRAY\") {\r\n                    return v;\r\n                }\r\n            }\r\n            return [];\r\n        },\r\n        /**\r\n         * 是否命中过滤上报数据;\r\n         * info:验证的数据\r\n         * ignoreArray:忽略的库信息\r\n         */\r\n        isHitFiltered: function (info, ignoreArray) {\r\n            if (ignoreArray === void 0) { ignoreArray = []; }\r\n            if (info) {\r\n                for (var i = 0; i < ignoreArray.length; i++) {\r\n                    var ignoreStr = ignoreArray[i];\r\n                    if (typeof ignoreStr === \"string\") {\r\n                        ignoreStr = new RegExp(ignoreStr);\r\n                    }\r\n                    var typeName = (ignoreStr.constructor && ignoreStr.constructor.name).toLowerCase();\r\n                    if (typeName === \"regexp\" && ignoreStr.test(info)) {\r\n                        return true;\r\n                    }\r\n                }\r\n            }\r\n            return false;\r\n        },\r\n        /**\r\n         * 用于返回dom节点路径\r\n         * @param {} e\r\n         */\r\n        getXPath: function (e) {\r\n            var t = [];\r\n            for (t = []; e && e.nodeType === Node.ELEMENT_NODE; e = e.parentNode) {\r\n                var r = void 0, n = 0, a = !1;\r\n                for (r = e.previousSibling; r; r = r.previousSibling)\r\n                    r.nodeType !== Node.DOCUMENT_TYPE_NODE &&\r\n                        r.nodeName === e.nodeName &&\r\n                        ++n;\r\n                for (r = e.nextSibling; r && !a; r = r.nextSibling)\r\n                    r.nodeName === e.nodeName && (a = !0);\r\n                var i = (e.prefix ? e.prefix + \":\" : \"\") + e.localName;\r\n                var o = n || a ? \"[\" + (n + 1) + \"]\" : \"\";\r\n                t.splice(0, 0, i + o);\r\n            }\r\n            return t.length ? \"/\" + t.join(\"/\") : null;\r\n        },\r\n        /**\r\n         * ajax数据提交\r\n         **/\r\n        zybajax: function (url, params, successFun, errorFun) {\r\n            var _this = this;\r\n            var xmlhttp = new XMLHttpRequest();\r\n            if (Array.isArray(params) && params.length === 1) {\r\n                params = params[0];\r\n            }\r\n            params = JSON.stringify(params);\r\n            xmlhttp[\"onreadystatechange\"] = function () {\r\n                if (xmlhttp[\"readyState\"] == 4 && xmlhttp[\"status\"] == 200) {\r\n                    successFun && successFun(_this.readXHRbody(xmlhttp));\r\n                }\r\n            };\r\n            xmlhttp[\"open\"](\"POST\", url, true);\r\n            xmlhttp[\"setRequestHeader\"](\"Content-type\", \"application/x-www-form-urlencoded\");\r\n            xmlhttp[\"error\"] = function () {\r\n                if (errorFun) {\r\n                    errorFun(_this.readXHRbody(xmlhttp));\r\n                }\r\n                else {\r\n                    console.error(\"report error:\" + _this.readXHRbody(xmlhttp));\r\n                }\r\n            };\r\n            try {\r\n                xmlhttp[\"send\"](params);\r\n            }\r\n            catch (e) {\r\n                if (errorFun) {\r\n                    errorFun(this.readXHRbody(xmlhttp));\r\n                }\r\n                console.error(\"report error\" + e.message);\r\n            }\r\n        },\r\n        /**\r\n         * xhr直接读取 responseText会出错 所以换方式读取\r\n         * @param xhr\r\n         */\r\n        readXHRbody: function (xhr) {\r\n            if (!xhr.responseType || xhr.responseType === \"text\") {\r\n                return xhr.responseText;\r\n            }\r\n            else if (xhr.responseType === \"document\") {\r\n                return xhr.responseXML;\r\n            }\r\n            else {\r\n                return xhr.response;\r\n            }\r\n        },\r\n        /**\r\n         * 对指定字符串计算hash值（网上摘抄）\r\n         */\r\n        hash: function (input) {\r\n            var I64BIT_TABLE = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789_-\".split(\"\");\r\n            var hash = 5381;\r\n            var i = input.length - 1;\r\n            if (typeof input == \"string\") {\r\n                for (; i > -1; i--)\r\n                    hash += (hash << 5) + input.charCodeAt(i);\r\n            }\r\n            else {\r\n                for (; i > -1; i--)\r\n                    hash += (hash << 5) + input[i];\r\n            }\r\n            var value = hash & 0x7fffffff;\r\n            var retValue = \"\";\r\n            do {\r\n                retValue += I64BIT_TABLE[value & 0x3f];\r\n            } while ((value >>= 6));\r\n            return retValue;\r\n        },\r\n        /**\r\n         * 指定值是否命中\r\n         * @param t\r\n         */\r\n        isTakeSample: function (t) {\r\n            var e = Math.floor(Math.random() * t * 10 + 1);\r\n            return e <= 10;\r\n        },\r\n        /**\r\n         *用于组装系统信息\r\n         **/\r\n        getSysInfo: function (assignObj) {\r\n            if (assignObj === void 0) { assignObj = null; }\r\n            var that = this;\r\n            var versionObj = this.getSysVersion();\r\n            var params = that.getUrlParams();\r\n            var rtObj = {\r\n                client: that.client(),\r\n                sysPlat: that.getSysPlat(),\r\n                agent: this.AGENT,\r\n                sysVersion: versionObj.vd,\r\n                runPlat: that.getRunPlat(),\r\n                phoneBrand: that.getPhoneBrand(),\r\n                url: that.getUrl(),\r\n                /**0801新增页面唯一来源 */\r\n                referrer: that.getReferrer(),\r\n                urlParams: JSON.stringify(params),\r\n                network: that.getNetWork(),\r\n                /*---新增---*/\r\n                winW: window.screen.width || window.screen.availWidth,\r\n                winH: window.screen.height || window.screen.availHeight,\r\n                locale: window.navigator.language,\r\n                metaData: document.title,\r\n                createTime: new Date().getTime(),\r\n                authkey: config_1.default.__key,\r\n                sysMv: versionObj.vm,\r\n                /*--2019-06-11新增--*/\r\n                uvId: that.getUvId(),\r\n                vcname: params[\"vcname\"],\r\n                cuid: params[\"cuid\"],\r\n                sdkVersion: \"_sdkVersion_\",\r\n                /**--2019-07-08新增运行环境--*/\r\n                jre: that.getJRE(params),\r\n                cname: params[\"province\"]\r\n            };\r\n            rtObj = this.assign(rtObj, that.getBI());\r\n            if (assignObj &&\r\n                Object.prototype.toString.call(assignObj) === \"[object Object]\") {\r\n                rtObj[\"extColumn\"] = assignObj;\r\n            }\r\n            return rtObj;\r\n        },\r\n        /**\r\n         * 客户端检测（浏览器，操作系统，平台）\r\n         * @author duankai\r\n         */\r\n        client: function () { },\r\n        /**\r\n         * 获取dom样式\r\n         * @param element\r\n         * @param att\r\n         */\r\n        getStyle: function (element, att) {\r\n            //特性侦测\r\n            if (window.getComputedStyle) {\r\n                //优先使用W3C规范\r\n                return window.getComputedStyle(element)[att];\r\n            }\r\n            else {\r\n                //针对IE9以下兼容\r\n                return element.currentStyle[att];\r\n            }\r\n        },\r\n        /**\r\n         * onReady\r\n         * @param cb\r\n         */\r\n        onReady: function (cb) {\r\n            var _this = this;\r\n            if (this.hasReady) {\r\n                cb && cb();\r\n                return;\r\n            }\r\n            if (doc.readyState === \"complete\") {\r\n                cb && cb();\r\n            }\r\n            else {\r\n                this.on(win, \"load\", function () {\r\n                    _this.hasReady = true;\r\n                    cb && cb();\r\n                });\r\n            }\r\n        },\r\n        /**\r\n         * on事件\r\n         */\r\n        on: (function () {\r\n            if (win.addEventListener) {\r\n                return function (ele, type, fun) {\r\n                    ele.addEventListener(type, fun, !0);\r\n                };\r\n            }\r\n            else if (\"attachEvent\" in win) {\r\n                return function (ele, type, fun) {\r\n                    ele.attachEvent(\"on\" + type, fun);\r\n                };\r\n            }\r\n        })(),\r\n        /**\r\n         * off事件\r\n         */\r\n        off: (function () {\r\n            if (win.removeEventListener) {\r\n                return function (ele, type, fun) {\r\n                    ele.removeEventListener(type, fun, !0);\r\n                };\r\n            }\r\n            else if (\"detachEvent\" in win) {\r\n                return function (ele, type, fun) {\r\n                    ele.detachEvent(\"on\" + type, fun);\r\n                };\r\n            }\r\n        })()\r\n    };\r\n})();\r\nexports.default = tools;\r\n","/*\r\n * @Author: your name\r\n * @Date: 2019-07-30 21:19:29\r\n * @LastEditTime: 2019-12-26 10:12:39\r\n * @LastEditors: your name\r\n * @Description: In User Settings Edit\r\n * @FilePath: \\EVO\\owl-sdk\\src\\index.js\r\n */\r\nimport tools from \"./base/tools\";\r\nimport err from \"./lib/err\";\r\nimport def from \"./lib/def\";\r\nimport page from \"./lib/page\";\r\nimport RegCenter from \"./regCenter\";\r\n\r\nlet apps = [\"parent\"];\r\n// const isApp = uaNames => {\r\n//   let ua = tools.getAent();\r\n//   for (let i = 0; i < uaNames.length; i++) {\r\n//     if (ua.indexOf(uaNames[i]) > -1) {\r\n//       return true;\r\n//     }\r\n//   }\r\n//   return false;\r\n// };\r\n\r\nfunction install(config = {}) {\r\n  try {\r\n    if (config.uaName) {\r\n      Array.isArray(config.uaName)\r\n        ? (apps = apps.concat(config.uaName))\r\n        : apps.push(config.uaName);\r\n    }\r\n\r\n    let regCenter = new RegCenter(window);\r\n    regCenter.init(config);\r\n    return {\r\n      /**\r\n       * 自定义上报异常\r\n       * @param errorType\r\n       * @param errorInfo\r\n       * @param errorMsg\r\n       */\r\n      errorPush({ errorType, errorInfo = \"\", errorMsg = \"\" }) {\r\n        if (undefined === errorType || undefined === errorInfo) {\r\n          console.error(\"errorType or errorInfo is undefined!\");\r\n          return;\r\n        }\r\n        err.customError(errorType, errorInfo, errorMsg);\r\n      },\r\n      logPush(errorInfo) {\r\n        def.submitDataPush(errorInfo);\r\n      },\r\n      //给owl-sdk-vue进行错误上报。\r\n      vueErrorPush(errorKey, errInfo) {\r\n        err.submitDataPush(errorKey, errInfo);\r\n      },\r\n      /**\r\n       * 自定义上报性能数据， 目前仅限于 cfpt(自定义首屏)\r\n       * @param perfObject\r\n       */\r\n      perfPush(perfObject) {\r\n        if (Object.keys(perfObject).length && perfObject.cfpt) {\r\n          page.saveCustomPerf(perfObject);\r\n        }\r\n      }\r\n    };\r\n  } catch (e) {\r\n    console.log(`error:${e}`);\r\n  }\r\n}\r\nwindow[\"zybLogCollect\"] = install;\r\nexport default install;\r\n","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar submitPool_1 = require(\"../base/submitPool\");\r\nvar supper_1 = require(\"./supper\");\r\nvar tools_1 = require(\"../base/tools\");\r\nvar Def = /** @class */ (function (_super) {\r\n    __extends(Def, _super);\r\n    function Def() {\r\n        var _this = _super.call(this) || this;\r\n        _this.TYPE = 'custom';\r\n        return _this;\r\n        //用于去重错误信息;\r\n    }\r\n    /**\r\n     * 错误数据压到错误数据当中\r\n     */\r\n    Def.prototype.submitDataPush = function (collectInfo) {\r\n        var customInfo = tools_1.default.assign(collectInfo, this.baseInfo);\r\n        customInfo['type'] = this.TYPE;\r\n        if (collectInfo.constructor.name !== 'Object') {\r\n            customInfo = tools_1.default.assign({\r\n                customInfo: collectInfo\r\n            }, this.baseInfo);\r\n        }\r\n        submitPool_1.default.pushDatas(customInfo);\r\n    };\r\n    /**\r\n     * 开始错误信息收集\r\n     */\r\n    Def.prototype.init = function (win_, baseInfo_) {\r\n        _super.prototype.init.call(this, win_, baseInfo_);\r\n    };\r\n    return Def;\r\n}(supper_1.default));\r\nvar def = new Def();\r\nexports.default = def;\r\n","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar tools_1 = require(\"../base/tools\");\r\nvar submitPool_1 = require(\"../base/submitPool\");\r\nvar supper_1 = require(\"./supper\");\r\nvar config_1 = require(\"../base/config\");\r\nvar error = /** @class */ (function (_super) {\r\n    __extends(error, _super);\r\n    function error() {\r\n        var _this = _super.call(this) || this;\r\n        _this.TYPE = \"error\";\r\n        _this.EVENT_MAX_VALUE = 20;\r\n        _this.win = window;\r\n        _this.errorInfoMap = {};\r\n        _this.eventlist = [];\r\n        _this.errorOpStatus = { INIT: 1, OK: 2, FAIL: 3 };\r\n        return _this;\r\n        //用于去重错误信息;\r\n    }\r\n    /**\r\n     * md5key:为区分错误\r\n     * 错误数据压到错误数据当中\r\n     */\r\n    error.prototype.submitDataPush = function (md5key, errorObj) {\r\n        var hex_md5 = tools_1.default.hash(md5key);\r\n        if (tools_1.default.isHitFiltered(errorObj.message, config_1.default.__filterErrors) ||\r\n            this.errorInfoMap[hex_md5]) {\r\n            return;\r\n        }\r\n        errorObj[\"userBehavior\"] = this.eventlist;\r\n        errorObj[\"id\"] = hex_md5;\r\n        errorObj = tools_1.default.assign(errorObj, this.baseInfo);\r\n        errorObj[\"type\"] = this.TYPE;\r\n        errorObj[\"clientTime\"] = +new Date();\r\n        this.errorInfoMap[hex_md5] = this.errorOpStatus[\"INIT\"];\r\n        submitPool_1.default.pushDatas(errorObj);\r\n    };\r\n    error.prototype.customError = function (errorType, info, msg) {\r\n        if (info === void 0) { info = \"\"; }\r\n        if (msg === void 0) { msg = \"\"; }\r\n        var k = tools_1.default.getUvId();\r\n        this.submitDataPush(k, { errorType: errorType, errorInfo: info, message: msg });\r\n    };\r\n    /**\r\n     * 用户行为放入队列\r\n     * @param {*} e\r\n     */\r\n    error.prototype.pushList = function (e) {\r\n        this.eventlist.push(JSON.stringify(e));\r\n        this.eventlist.length > 20 && this.eventlist.shift();\r\n    };\r\n    /**\r\n     * 用户行为记录\r\n     **/\r\n    error.prototype.addUserBehavior = function () {\r\n        var _this = this;\r\n        this.win.addEventListener(\"click\", function (event) {\r\n            var r = event.target;\r\n            var outerHTML = r && r.outerHTML;\r\n            outerHTML &&\r\n                outerHTML.length > 200 &&\r\n                (outerHTML = outerHTML.slice(0, 200));\r\n            _this.pushList({\r\n                errorType: \"click\",\r\n                page: {\r\n                    url: window.location.href,\r\n                    title: document.title\r\n                },\r\n                detail: {\r\n                    outerHTML: outerHTML,\r\n                    tagName: r && r.tagName,\r\n                    className: r && r.className\r\n                },\r\n                time: new Date().getTime()\r\n            });\r\n        }, true);\r\n    };\r\n    /**\r\n     * 收集ajax请求错误\r\n     * @param {*} errorInfo\r\n     */\r\n    error.prototype.collectXHRError = function (errorInfo) {\r\n        var xhrErrorInfo = {\r\n            xhrInfo: errorInfo,\r\n            errorReqLink: errorInfo.reqUrl,\r\n            errorType: \"XMLHttpRequest\"\r\n        };\r\n        var name = errorInfo[\"reqType\"] +\r\n            errorInfo[\"reqUrl\"] +\r\n            errorInfo[\"type\"] +\r\n            errorInfo[\"reqParams\"];\r\n        this.submitDataPush(name, xhrErrorInfo);\r\n    };\r\n    /**\r\n     * 收集promiseError相关错误信息\r\n     */\r\n    error.prototype.collectPromiseError = function () {\r\n        var _this = this;\r\n        var notifyJsError = function (err, res) {\r\n            if (err) {\r\n                err &&\r\n                    err.name !== \"unhandledrejection\" &&\r\n                    _this.win.console &&\r\n                    console.error(err);\r\n                var JsError = {\r\n                    name: err.name || (res && res.info) || \"caught error\",\r\n                    message: err.message || (res && res.info),\r\n                    componentName: res && res.componentName,\r\n                    info: res && res.info,\r\n                    stacktrace: err.stack,\r\n                    fileName: err.fileName,\r\n                    lineNumber: err.lineNumber,\r\n                    columnNumber: err.columnNumber,\r\n                    errorType: \"promiseError\"\r\n                };\r\n                _this.submitDataPush(JsError.name, JsError);\r\n            }\r\n        };\r\n        this.win.addEventListener(\"unhandledrejection\", function (e) {\r\n            var reason = e.reason;\r\n            if (Object.prototype.toString.apply(reason) === \"[object Error]\") {\r\n                reason.name = \"unhandledrejection\";\r\n                notifyJsError(reason);\r\n            }\r\n            else {\r\n                notifyJsError({ message: reason, name: \"unhandledrejection\" });\r\n            }\r\n        });\r\n    };\r\n    /**\r\n     * 收集资源加载错误数据 src 相关\r\n     */\r\n    error.prototype.collectSrcError = function () {\r\n        var _this = this;\r\n        var that = this;\r\n        this.win.addEventListener &&\r\n            this.win.addEventListener(\"error\", function (event) {\r\n                var target = event.target || event.srcElement;\r\n                var eventName = event.constructor.name.toLocaleLowerCase();\r\n                if (eventName === \"errorevent\") {\r\n                    _this.baseErrorGroupFun(event.message, event.filename, event.lineno, event.colno, event.error);\r\n                    return;\r\n                }\r\n                var outerHTML = (target && target.outerHTML) || \"\";\r\n                var errorLink = target && (target.src || target.link);\r\n                var resourceError = {\r\n                    errorType: \"resourceError\",\r\n                    target: {\r\n                        outerHTML: outerHTML,\r\n                        src: errorLink,\r\n                        tagName: target && target.tagName,\r\n                        className: target && target.className,\r\n                        type: target && target.type,\r\n                        XPath: tools_1.default.getXPath(target),\r\n                        timeStamp: event.timeStamp\r\n                    },\r\n                    errorLink: errorLink,\r\n                    resourceHost: tools_1.default.getHost(errorLink),\r\n                    resourceType: target.tagName\r\n                };\r\n                that.submitDataPush(errorLink, resourceError);\r\n            }, true);\r\n    };\r\n    /**\r\n     *\r\n     * @param errorInfo\r\n     * @param url\r\n     * @param lineNo\r\n     * @param columnNo\r\n     * @param error\r\n     */\r\n    error.prototype.baseErrorGroupFun = function (errorMessage, url, lineNo, columnNo, error) {\r\n        var errorObj = {};\r\n        if (!!error && !!error.stack) {\r\n            //如果浏览器有堆栈信息直接使用\r\n            errorObj[\"stacktrace\"] = error.stack.toString();\r\n        }\r\n        var md5key = errorMessage;\r\n        errorObj[\"errorInfo\"] = errorMessage;\r\n        errorObj[\"lineNumber\"] = lineNo;\r\n        errorObj[\"columnNumber\"] =\r\n            columnNo ||\r\n                (this.win.event && this.win.event.errorCharacter) ||\r\n                0;\r\n        errorObj[\"message\"] = errorObj[\"errorInfo\"];\r\n        errorObj[\"fileName\"] = encodeURIComponent(url || \"\");\r\n        errorObj[\"errorType\"] = \"jsError\";\r\n        this.submitDataPush(md5key, errorObj);\r\n        return false;\r\n    };\r\n    /**\r\n     * 收集基本错误信息\r\n     */\r\n    error.prototype.collectBaseError = function () {\r\n        var _this = this;\r\n        var that = this;\r\n        /**\r\n         * 错误信息收集\r\n         */\r\n        this.win.onerror = function (errorMessage, url, lineNo, columnNo, error) {\r\n            _this.baseErrorGroupFun(errorMessage, url, lineNo, columnNo, error);\r\n            return false;\r\n        };\r\n    };\r\n    /**\r\n     * 开始错误信息收集\r\n     */\r\n    error.prototype.init = function (win_, baseInfo_) {\r\n        _super.prototype.init.call(this, win_, baseInfo_);\r\n        this.addUserBehavior(); //记录用户当前行为\r\n        this.collectPromiseError(); //收集promise错误\r\n        this.collectSrcError();\r\n        this.collectBaseError();\r\n    };\r\n    return error;\r\n}(supper_1.default));\r\nvar err = new error();\r\nexports.default = err;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar tools_1 = require(\"../base/tools\");\r\n/**\r\n * dom observer，可以实现dom变化通知我们，然后我们队这次dom做标记（打tag），\r\n * 并记录这一次tag对应的时间（performance.now()或者自己减去开始时间），这样每一次变更的时间就存储起来了。\r\n * 然后深入每个dom以及其子节点 计算得分（得分规则：首屏区域比重肯定高，等等）\r\n */\r\nvar performance = window.performance;\r\n// @ts-ignore\r\nvar MutationObserver = window.MutationObserver;\r\n/**\r\n * 统计中需要忽略标签\r\n */\r\nvar IGNORE_TAG_SET = [\"SCRIPT\", \"STYLE\", \"META\", \"HEAD\", \"LINK\"];\r\n/**\r\n * 元素权重\r\n * 因为我们不希望图片元素权重过大（权重大代表FMP计算会认为其实主角）\r\n * 所以目前设定为全部1\r\n */\r\nvar TAG_WEIGHT_MAP = {\r\n    SVG: 1,\r\n    IMG: 1,\r\n    CANVAS: 1,\r\n    OBJECT: 1,\r\n    EMBED: 1,\r\n    VIDEO: 2\r\n};\r\n// 统计起点时间\r\nvar START_TIME = 0;\r\ntry {\r\n    START_TIME = performance.timing.fetchStart;\r\n}\r\ncatch (e) {\r\n    START_TIME = Date.now();\r\n}\r\n/**\r\n * 停止 observe时间\r\n */\r\nvar LIMIT = 10000;\r\nvar WW = window.innerWidth;\r\nvar WH = window.innerHeight;\r\nvar VIEWPORT_AREA = WW * WH;\r\nvar DELAY = 500;\r\n// dom标记\r\nvar TAG_FLAG = 'o_c';\r\nvar location = window.location;\r\nvar FMPTiming = /** @class */ (function () {\r\n    function FMPTiming() {\r\n        this.statusCollector = [];\r\n        this.flag = true;\r\n        this.muo = MutationObserver;\r\n        this.observer = null;\r\n        this.callbackCount = 1;\r\n        this.mp = {};\r\n        this.muo && this.initObserver();\r\n    }\r\n    FMPTiming.prototype.initObserver = function () {\r\n        var _this = this;\r\n        this.firstSnapshot();\r\n        tools_1.default.log('initObserver');\r\n        this.observer = new MutationObserver(function () {\r\n            var t = Date.now() - START_TIME;\r\n            var bodyTarget = document.body;\r\n            if (bodyTarget) {\r\n                _this.doTag(bodyTarget, _this.callbackCount++);\r\n            }\r\n            _this.statusCollector.push({ t: t });\r\n        });\r\n        this.observer.observe(document, {\r\n            childList: true,\r\n            subtree: true\r\n        });\r\n        // todo   window beforeunload 必须结束统计\r\n    };\r\n    FMPTiming.prototype.getFMP = function () {\r\n        var me = this;\r\n        // @ts-ignore\r\n        return new Promise(function (resolve, rejet) {\r\n            if (document.readyState === \"complete\") {\r\n                me.checkCanCal(START_TIME) ?\r\n                    setTimeout(function () {\r\n                        resolve(me.calFinallScore());\r\n                    }, DELAY) : resolve(me.calFinallScore());\r\n            }\r\n            else {\r\n                window.addEventListener(\"load\", function () {\r\n                    resolve(me.getFMP());\r\n                }, true);\r\n            }\r\n        });\r\n    };\r\n    FMPTiming.prototype.firstSnapshot = function () {\r\n        var t = Date.now() - START_TIME;\r\n        var bodyTarget = document.body;\r\n        if (bodyTarget) {\r\n            this.doTag(bodyTarget, this.callbackCount++);\r\n        }\r\n        this.statusCollector.push({\r\n            t: t\r\n        });\r\n    };\r\n    FMPTiming.prototype.initResourceMap = function () {\r\n        var _this = this;\r\n        performance.getEntries().forEach(function (item) {\r\n            _this.mp[item.name] = item['responseEnd'];\r\n        });\r\n    };\r\n    /**\r\n     * 对dom标记\r\n     * @param target\r\n     * @param callbackCount\r\n     */\r\n    FMPTiming.prototype.doTag = function (target, callbackCount) {\r\n        var tagName = target.tagName;\r\n        if (IGNORE_TAG_SET.indexOf(tagName) === -1) {\r\n            var childrenLen = target.children ? target.children.length : 0;\r\n            if (childrenLen > 0) {\r\n                for (var childs = target.children, i = childrenLen - 1; i >= 0; i--) {\r\n                    if (childs[i].getAttribute(TAG_FLAG) === null) {\r\n                        childs[i].setAttribute(TAG_FLAG, callbackCount);\r\n                    }\r\n                    this.doTag(childs[i], callbackCount);\r\n                }\r\n            }\r\n        }\r\n    };\r\n    FMPTiming.prototype.calFinallScore = function () {\r\n        var fmp = -1;\r\n        var me = this;\r\n        if (MutationObserver && this.flag) {\r\n            me.observer.disconnect();\r\n            me.flag = false;\r\n            var res = me.deepTraversal(document.body);\r\n            var tp_1 = {\r\n                'st': undefined,\r\n                'els': [],\r\n                'dpss': [],\r\n            };\r\n            res.dpss.forEach(function (item) {\r\n                if (tp_1 && tp_1.st) {\r\n                    if (tp_1.st < item.st) {\r\n                        tp_1 = item;\r\n                    }\r\n                }\r\n                else {\r\n                    tp_1 = item;\r\n                }\r\n            });\r\n            // console.log(tp, this.statusCollector);\r\n            // @ts-ignore\r\n            // this.initResourceMap();\r\n            var resultSet = this.filterTheResultSet(tp_1.els);\r\n            var fmpTiming = this.calResult(resultSet);\r\n            fmp = Number(fmpTiming.toFixed(0));\r\n            tools_1.default.log(\"FMP: \" + fmp);\r\n        }\r\n        return fmp;\r\n    };\r\n    /**\r\n     * 计算结果 取集合里面最大值\r\n     * @param resultSet\r\n     */\r\n    FMPTiming.prototype.calResult = function (resultSet) {\r\n        var _this = this;\r\n        var rt = -1;\r\n        resultSet.forEach(function (item) {\r\n            var t = 0;\r\n            var index = +item.node.getAttribute(TAG_FLAG) - 1;\r\n            t = _this.statusCollector[index].t;\r\n            // if (item.weight === 1) {\r\n            //\r\n            // }\r\n            // 目前所有元素weight都是1 不会遇到以下逻辑\r\n            // else if (item.weight === 2) {\r\n            //     if (item.node.tagName === \"IMG\") {\r\n            //         t = this.mp[item.node.src];\r\n            //     } else if (item.node.tagName === \"SVG\") {\r\n            //         let index = +item.node.getAttribute(TAG_FLAG) - 1;\r\n            //         t = this.statusCollector[index].t;\r\n            //     } else {\r\n            //         //background image\r\n            //         let match = tools.getStyle(item.node, 'background-image')\r\n            //             .match(/url\\(\\\"(.*?)\\\"\\)/);\r\n            //\r\n            //         let s;\r\n            //         if (match && match[1]) {\r\n            //             s = match[1];\r\n            //         }\r\n            //         if (s && s.indexOf(\"http\") == -1) {\r\n            //             s = location.protocol + match[1];\r\n            //         }\r\n            //         t = this.mp[s];\r\n            //     }\r\n            // } else if (item.weight === 4) {\r\n            //     if (item.node.tagName === \"CANVAS\") {\r\n            //         let index = +item.node.getAttribute(TAG_FLAG) - 1;\r\n            //         t = this.statusCollector[index].t;\r\n            //     } else if (item.node.tagName === \"VIDEO\") {\r\n            //         t = this.mp[item.node.src];\r\n            //\r\n            //         !t && (t = this.mp[item.node.poster]);\r\n            //     }\r\n            // }\r\n            rt < t && (rt = t);\r\n        });\r\n        return rt;\r\n    };\r\n    /**\r\n     * 过滤出大于平均值的\r\n     * @param els\r\n     */\r\n    FMPTiming.prototype.filterTheResultSet = function (els) {\r\n        var sum = 0;\r\n        els.forEach(function (item) {\r\n            sum += item.st;\r\n        });\r\n        var avg = sum / els.length;\r\n        return els.filter(function (item) {\r\n            return item.st > avg;\r\n        });\r\n    };\r\n    FMPTiming.prototype.deepTraversal = function (node) {\r\n        if (node) {\r\n            var dpss = [];\r\n            for (var i = 0, child = void 0; (child = node.children[i]); i++) {\r\n                var s = this.deepTraversal(child);\r\n                if (s.st) {\r\n                    dpss.push(s);\r\n                }\r\n            }\r\n            return this.calScore(node, dpss);\r\n        }\r\n        return {};\r\n    };\r\n    // 计算得分\r\n    FMPTiming.prototype.calScore = function (node, dpss) {\r\n        var _a = node.getBoundingClientRect(), width = _a.width, height = _a.height, left = _a.left, top = _a.top, bottom = _a.bottom, right = _a.right;\r\n        var f = 1;\r\n        if (WH < top || WW < left) {\r\n            // 不在可视viewport中 得分0\r\n            f = 0;\r\n        }\r\n        var sdp = 0;\r\n        dpss.forEach(function (item) {\r\n            sdp += item.st;\r\n        });\r\n        // 所有权重都是1\r\n        var weight = 1; //TAG_WEIGHT_MAP[node.tagName] || 1;\r\n        // if (weight === 1 &&\r\n        //     tools.getStyle(node, 'background-image') &&\r\n        //     tools.getStyle(node, 'background-image') !== \"initial\") {\r\n        //     weight = 1 //TAG_WEIGHT_MAP[\"IMG\"]; // 将有图片背景的普通元素 权重设置为img\r\n        // }\r\n        // 计算得分\r\n        var st = width * height * weight * f;\r\n        var els = [{ node: node, st: st, weight: weight }];\r\n        var areaPercent = this.calAreaPercent(node);\r\n        // st*面积占比 获得最终得分\r\n        if (sdp > st * areaPercent || areaPercent === 0) {\r\n            st = sdp;\r\n            els = [];\r\n            dpss.forEach(function (item) {\r\n                els = els.concat(item.els);\r\n            });\r\n        }\r\n        return {\r\n            dpss: dpss,\r\n            st: st,\r\n            els: els\r\n        };\r\n    };\r\n    // 检查是否可以停止设置observer dom\r\n    FMPTiming.prototype.checkCanCal = function (start) {\r\n        var ti = Date.now() - start;\r\n        return !(ti > LIMIT ||\r\n            ti - ((this.statusCollector && this.statusCollector.length &&\r\n                this.statusCollector[this.statusCollector.length - 1].t) || 0)\r\n                > 1000);\r\n    };\r\n    /**\r\n     * 计算元素在可视区面积占比\r\n     * @param node\r\n     */\r\n    FMPTiming.prototype.calAreaPercent = function (node) {\r\n        var _a = node.getBoundingClientRect(), left = _a.left, right = _a.right, top = _a.top, bottom = _a.bottom, width = _a.width, height = _a.height;\r\n        var wl = 0;\r\n        var wt = 0;\r\n        var wr = WW;\r\n        var wb = WH;\r\n        var overlapX = right - left + (wr - wl) - (Math.max(right, wr) - Math.min(left, wl));\r\n        if (overlapX <= 0) {\r\n            //x 轴无交点\r\n            return 0;\r\n        }\r\n        var overlapY = bottom - top + (wb - wt) - (Math.max(bottom, wb) - Math.min(top, wt));\r\n        if (overlapY <= 0) {\r\n            return 0;\r\n        }\r\n        return (overlapX * overlapY) / (width * height);\r\n    };\r\n    return FMPTiming;\r\n}());\r\nexports.default = FMPTiming;\r\n","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar supper_1 = require(\"./supper\");\r\nvar submitPool_1 = require(\"../base/submitPool\");\r\nvar tools_1 = require(\"../base/tools\");\r\nvar config_1 = require(\"../base/config\");\r\nvar fmp_1 = require(\"./fmp\");\r\n// @ts-ignore\r\nvar page = /** @class */ (function (_super) {\r\n    __extends(page, _super);\r\n    function page() {\r\n        var _this = \r\n        //载入数据信息\r\n        _super.call(this) || this;\r\n        _this.loadInfo = {};\r\n        _this.TYPE = \"page\";\r\n        _this.winPf = window.performance;\r\n        _this.times = _this.winPf\r\n            ? _this.winPf[\"timing\"] || _this.winPf.getEntriesByType(\"navigation\")[0]\r\n            : {};\r\n        _this.fmp = null;\r\n        //解决内部onload方法覆盖用户定义全局onload方法\r\n        _this.onloadFun = window.onload || function () { };\r\n        // 自定义字段列表\r\n        _this.customPerf = [\"cfpt\"];\r\n        return _this;\r\n    }\r\n    /**\r\n     * 初始化数据\r\n     */\r\n    page.prototype.init = function (win_, baseInfo_) {\r\n        _super.prototype.init.call(this, win_, baseInfo_);\r\n        var useFMP = config_1.default.__useFMP;\r\n        if (useFMP) {\r\n            this.getFMPtiming();\r\n        }\r\n    };\r\n    /**\r\n     * 获取页面加载信息\r\n     */\r\n    page.prototype.getLoadPageInfo = function () {\r\n        /**\r\n         * 获取浏览器时间轴信息\r\n         */\r\n        this.loadInfo[\"timeJson\"] = JSON.stringify(this.times);\r\n        var times = this.times;\r\n        var start = 0;\r\n        if (undefined !== times.navigationStart) {\r\n            start = tools_1.default.toFixed2(times.navigationStart);\r\n        }\r\n        /** 阶段耗时 -- start --**/\r\n        //dns解析时间\r\n        this.loadInfo[\"dnsTime\"] = tools_1.default.toFixed2(times.domainLookupEnd - times.domainLookupStart);\r\n        //tcp连接时间\r\n        this.loadInfo[\"tcpTime\"] = tools_1.default.toFixed2(times.connectEnd - times.connectStart);\r\n        //网络请求耗时（新增）time to first byte\r\n        this.loadInfo[\"ttfb\"] = tools_1.default.toFixed2(times.responseStart - times.requestStart);\r\n        //数据传输耗时（新增）\r\n        this.loadInfo[\"trans\"] = tools_1.default.toFixed2(times.responseEnd - times.responseStart);\r\n        //dom解析耗时（新增）\r\n        this.loadInfo[\"domParsingTime\"] = tools_1.default.toFixed2(times.domInteractive - times.responseEnd);\r\n        //资源加载耗时（新增）\r\n        this.loadInfo[\"resLoadTime\"] = tools_1.default.toFixed2(times.loadEventStart - times.domContentLoadedEventEnd);\r\n        // 前端onload 执行时间 (add: 2019-07-15)\r\n        this.loadInfo[\"onLoadTime\"] = tools_1.default.toFixed2(times.loadEventEnd - times.loadEventStart);\r\n        //白屏时间(空页面时间)\r\n        // this.loadInfo[\"blankTime\"] = tools.toFixed2(blankTime - start);\r\n        // fpt First Paint Time, 首次渲染时间 / 白屏时间 (update: 2019-07-17)\r\n        this.loadInfo[\"blankTime\"] = tools_1.default.toFixed2(times.responseEnd - times.fetchStart);\r\n        // fmp first meaning paint, 也就是主要内容可见时间 todo\r\n        // fmp 不可通过指标减法直接得出。先不取\r\n        // 首屏时间   首屏时间计算方式待确认，先不使用。\r\n        this.loadInfo[\"firstTime\"] = tools_1.default.toFixed2(times.responseStart - start);\r\n        // First byte time, 首包时间 (add: 2019-07-17)\r\n        this.loadInfo[\"fbt\"] = tools_1.default.toFixed2(times.responseStart - times.domainLookupStart);\r\n        // Time to Interact 首次可交互时间 (add: 2019-07-17)\r\n        this.loadInfo[\"tti\"] = tools_1.default.toFixed2(times.domInteractive - times.fetchStart);\r\n        // DOM Ready时间、  原来意思为：资源渲染时间\r\n        this.loadInfo[\"resourceTime\"] = tools_1.default.toFixed2(times.domContentLoadedEventEnd - times.fetchStart);\r\n        //最终时间 页面完全加载 (update：2019-07-15 ）\r\n        this.loadInfo[\"finalTime\"] = tools_1.default.toFixed2(times.loadEventStart - times.fetchStart);\r\n        /** 关键性能指标 -- end --**/\r\n        this.loadInfo[\"resourcesTime\"] = this.getResourceTimes();\r\n        // memory 统计2019-08-21\r\n        // todo 应该存放到base中\r\n        var memory = this.winPf && this.winPf[\"memory\"];\r\n        if (memory) {\r\n            this.loadInfo[\"mused_p\"] = Number(((memory.usedJSHeapSize / memory.totalJSHeapSize) * 100).toFixed(0)); // JS 对象（包括V8引擎内部对象）占用的内存\r\n            this.loadInfo[\"mused\"] = memory.usedJSHeapSize; // JS 对象（包括V8引擎内部对象）占用的内存\r\n            this.loadInfo[\"mtotal\"] = memory.totalJSHeapSize; // 可使用的内存\r\n            this.loadInfo[\"mlimit\"] = memory.jsHeapSizeLimit; // 内存大小限制\r\n        }\r\n        this.loadInfo[\"type\"] = this.TYPE;\r\n    };\r\n    page.prototype.getResourceTimes = function () {\r\n        var resTimes = [];\r\n        if (this.winPf && this.winPf.getEntriesByType) {\r\n            var rts = this.winPf.getEntriesByType(\"resource\");\r\n            if (rts && Array.isArray(rts)) {\r\n                rts.forEach(function (t) {\r\n                    resTimes.push({\r\n                        type: (t[\"initiatorType\"] + \"\").toUpperCase(),\r\n                        path: t[\"name\"],\r\n                        duration: t[\"duration\"],\r\n                        connectStart: t[\"connectStart\"],\r\n                        /*\r\n                        2019-7-29\r\n                        duankai\r\n                        转换后的文件大小，与chrome的devtool Network里的size一致\r\n                          */\r\n                        transferSize: t[\"transferSize\"]\r\n                    });\r\n                });\r\n            }\r\n        }\r\n        return resTimes;\r\n    };\r\n    /**\r\n     * 保存自定义性能指标 todo 实验项目\r\n     *  cfpt  自定义首屏数据\r\n     * @param cfpt\r\n     */\r\n    page.prototype.saveCustomPerf = function (_a) {\r\n        var cfpt = _a.cfpt;\r\n        if (cfpt) {\r\n            this.loadInfo[\"cfpt\"] = cfpt;\r\n        }\r\n    };\r\n    /**\r\n     * 获取fmp时间\r\n     */\r\n    page.prototype.getFMPtiming = function () {\r\n        var fmp = new fmp_1.default();\r\n        this.fmp = fmp;\r\n        // todo test fmp2;\r\n    };\r\n    /**\r\n     * 提交首屏时间，首屏时间只在页面加载完成之事提交，具只提交一次。所以独立提交。\r\n     */\r\n    page.prototype.submit = function () {\r\n        var _this = this;\r\n        var useFMP = config_1.default.__useFMP;\r\n        //是否忽略抽样\r\n        //是否debugger\r\n        //就否命中采样。没有命中则不进行操作\r\n        //是否是命中忽略url关健字。\r\n        if (!config_1.default.__debug &&\r\n            config_1.default.__isPvRatio &&\r\n            !tools_1.default.isTakeSample(config_1.default.__pvRatio)) {\r\n            return;\r\n        }\r\n        if (this.winPf) {\r\n            tools_1.default.on(window, \"load\", function () {\r\n                _this.onloadFun();\r\n                // onload之时 loadEventEnd并没有值。 所以settimeout\r\n                setTimeout(function () {\r\n                    tools_1.default.log(\"onload\", _this.times[\"loadEventEnd\"]);\r\n                    _this.getLoadPageInfo();\r\n                    // 过滤超大异常值\r\n                    var loadInfo = _this.dataCheck();\r\n                    // 确认fmp统计完成\r\n                    if (useFMP) {\r\n                        _this.fmp\r\n                            .getFMP()\r\n                            .then(function (response) {\r\n                            submitPool_1.default.pushDatas(tools_1.default.assign(loadInfo, __assign(__assign({}, _this.baseInfo), { fmp: response })));\r\n                        })\r\n                            .catch(function (e) {\r\n                            console.log(e);\r\n                        });\r\n                    }\r\n                    else {\r\n                        submitPool_1.default.pushDatas(tools_1.default.assign(loadInfo, __assign({}, _this.baseInfo)));\r\n                    }\r\n                }, 50);\r\n            });\r\n        }\r\n        else {\r\n            //不兼容performance时直接提交，只收集基本信息\r\n            submitPool_1.default.pushDatas(tools_1.default.assign(this.loadInfo, this.baseInfo));\r\n            return;\r\n        }\r\n        //ajax提交\r\n    };\r\n    /**\r\n     *  极限性能数据校正\r\n     * @return data\r\n     */\r\n    page.prototype.dataCheck = function () {\r\n        var loadInfo = this.loadInfo;\r\n        // @ts-ignore\r\n        // todo 这里只过滤明显是错误的时间，不对细节时间做调整\r\n        // 以求最大真实度上报数据\r\n        // 所以最后 只要是大于30s的就认为有问题（我们认为大于30s的基本是错误时间）\r\n        var max = [\r\n            // 阶段指标\r\n            \"dnsTime\",\r\n            \"tcpTime\",\r\n            \"ttfb\",\r\n            \"trans\",\r\n            \"domParsingTime\",\r\n            \"resLoadTime\",\r\n            // 性能指标\r\n            //           首次渲染     完全加载     首次有效绘制   domReady  首次可交互   首包\r\n            \"firstTime\",\r\n            \"blankTime\",\r\n            \"finalTime\",\r\n            \"fmp\",\r\n            \"resourceTime\",\r\n            \"tti\",\r\n            \"fbt\"\r\n        ];\r\n        var maxValue = 300000;\r\n        max.forEach(function (key) {\r\n            var loadKeyVaule = loadInfo[key];\r\n            if (undefined != loadKeyVaule) {\r\n                if (loadKeyVaule > maxValue) {\r\n                    loadInfo[key] = maxValue + 1;\r\n                }\r\n                if (loadKeyVaule < 0) {\r\n                    loadInfo[key] = 0;\r\n                }\r\n            }\r\n        });\r\n        return loadInfo;\r\n    };\r\n    return page;\r\n}(supper_1.default));\r\n/**\r\n * 客户端页面加载信息收集\r\n */\r\nexports.default = new page();\r\n","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar submitPool_1 = require(\"../base/submitPool\");\r\nvar err_1 = require(\"./err\");\r\nvar config_1 = require(\"../base/config\");\r\nvar supper_1 = require(\"./supper\");\r\nvar tools_1 = require(\"../base/tools\");\r\nvar Req = /** @class */ (function (_super) {\r\n    __extends(Req, _super);\r\n    function Req() {\r\n        var _this = \r\n        //用于去重错误信息;\r\n        _super.call(this) || this;\r\n        _this.TYPE = \"slow\";\r\n        _this.ajaxUniqueMap = {};\r\n        _this.REQ_TIME = 800;\r\n        return _this;\r\n    }\r\n    /**\r\n     * 统一拦截处理\r\n     * @param reqObj\r\n     * @param that\r\n     * @param superThat\r\n     */\r\n    Req.prototype.intercept = function (reqObj, that, superThat) {\r\n        //当命中忽略关键字后直接返回\r\n        if (tools_1.default.isHitFiltered(reqObj[\"reqUrl\"], config_1.default.__ignoreUrlKeyWord)) {\r\n            return;\r\n        }\r\n        var reqErrorReg = /^(4|5){1}\\d{2}$/;\r\n        var reqOkReg = /^2{1}\\d{2}$/;\r\n        //正确返回为200状态的数据\r\n        //超过限定的请求时间\r\n        //如果2g网络情况下，则不上报。\r\n        if ((reqOkReg.test(that.status) || that.status + '' === '0') &&\r\n            reqObj[\"timeLong\"] >= superThat.REQ_TIME &&\r\n            superThat.baseInfo.network.toUpperCase() !== \"2G\") {\r\n            submitPool_1.default.pushDatas(tools_1.default.assign(reqObj, superThat.baseInfo));\r\n            //错误请求,直接进行错误回收\r\n            // 未命中请求过滤\r\n        }\r\n        else if (reqErrorReg.test(that.status)) {\r\n            reqObj[\"reqStatus\"] = that.status;\r\n            var body = tools_1.default.readXHRbody(that);\r\n            reqObj[\"resp\"] = body ? body.toString().substr(0, 300) : \"\"; //错误请求返回内容\r\n            err_1.default.collectXHRError(reqObj);\r\n        }\r\n    };\r\n    /**\r\n     * 开始错误信息收集\r\n     */\r\n    Req.prototype.init = function (win_, baseInfo_) {\r\n        var superThat = this;\r\n        var xhrObj = Object.create(null);\r\n        this.REQ_TIME = config_1.default.__slowReqTime; //多少秒数据还没有返回，测认定为慢服务\r\n        _super.prototype.init.call(this, win_, baseInfo_);\r\n        if (window.XMLHttpRequest) {\r\n            var xhrProto = window.XMLHttpRequest.prototype;\r\n            var _open_1 = xhrProto.open;\r\n            var _send_1 = xhrProto.send;\r\n            xhrProto.open = function (arg, xhr) {\r\n                var urls = xhr.split(\"?\");\r\n                xhrObj[\"reqStartTime\"] = +new Date();\r\n                xhrObj[\"reqType\"] = arg;\r\n                xhrObj[\"reqUrl\"] = urls[0];\r\n                xhrObj[\"type\"] = superThat.TYPE;\r\n                xhrObj[\"reqParams\"] = urls.length > 1 ? urls[1] : \"\";\r\n                _open_1.apply(this, arguments);\r\n                // 跨域失败\r\n            };\r\n            xhrProto.send = function () {\r\n                var that = this;\r\n                var _onreadystatechange = that.onreadystatechange;\r\n                var isReport = new RegExp(config_1.default.__requestUrl).test(xhrObj[\"reqUrl\"]);\r\n                that.onreadystatechange = function () {\r\n                    try {\r\n                        if (!isReport && that.readyState === 4) {\r\n                            var reqObj = xhrObj;\r\n                            var startTime = reqObj[\"reqStartTime\"];\r\n                            var endTime = +new Date();\r\n                            var timeLong_ = endTime - startTime;\r\n                            reqObj[\"timeLong\"] = timeLong_;\r\n                            reqObj[\"status\"] = that.status;\r\n                            reqObj[\"clientTime\"] = +new Date();\r\n                            superThat.intercept(reqObj, that, superThat);\r\n                        }\r\n                    }\r\n                    catch (e) {\r\n                        console.log(\"error:\" + e);\r\n                    }\r\n                    finally {\r\n                        _onreadystatechange && _onreadystatechange.apply(that, arguments);\r\n                    }\r\n                };\r\n                _send_1.apply(this, arguments);\r\n                // 失败\r\n            };\r\n        }\r\n    };\r\n    return Req;\r\n}(supper_1.default));\r\nexports.default = new Req();\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar submitPool_1 = require(\"../base/submitPool\");\r\nvar supper = /** @class */ (function () {\r\n    function supper() {\r\n        this.win = window;\r\n        this.baseInfo = {};\r\n    }\r\n    /**\r\n     * 错误上报提交处理\r\n     */\r\n    supper.prototype.submit = function () {\r\n        submitPool_1.default.start();\r\n    };\r\n    /**\r\n     * 开始错误信息收集\r\n     */\r\n    supper.prototype.init = function (win, baseInfo) {\r\n        this.win = win || window;\r\n        this.baseInfo = baseInfo;\r\n    };\r\n    return supper;\r\n}());\r\nexports.default = supper;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n/*\r\n * @Author: your name\r\n * @Date: 2019-07-30 21:19:29\r\n * @LastEditTime: 2019-12-26 10:12:49\r\n * @LastEditors: your name\r\n * @Description: In User Settings Edit\r\n * @FilePath: \\EVO\\owl-sdk\\src\\regCenter.ts\r\n */\r\nvar tools_1 = require(\"./base/tools\");\r\nvar config_1 = require(\"./base/config\");\r\nvar page_1 = require(\"./lib/page\");\r\nvar err_1 = require(\"./lib/err\");\r\nvar req_1 = require(\"./lib/req\");\r\nvar def_1 = require(\"./lib/def\");\r\nvar RegCenter = /** @class */ (function () {\r\n    function RegCenter(win_) {\r\n        this.win = window;\r\n        this.baseSysInfo = {};\r\n        this.regModules = [page_1.default, err_1.default, req_1.default, def_1.default];\r\n        //注册数据容器\r\n        this.win = win_ || window;\r\n    }\r\n    /**\r\n     * 注册上报处理对像至容器。\r\n     */\r\n    RegCenter.prototype.regAndTrigger = function () {\r\n        var _this = this;\r\n        this.regModules.forEach(function (obj) {\r\n            _this.regModules.push(obj);\r\n            obj.init(window, JSON.parse(JSON.stringify(_this.baseSysInfo))); //解决引用数据问题，一个简单的拷贝;\r\n            //激发，触动各注册模块的自收集功能。 trigger;\r\n            obj[\"submit\"]();\r\n        });\r\n    };\r\n    /**\r\n     * 初始化数据\r\n     * @param config_\r\n     */\r\n    RegCenter.prototype.init = function (config_) {\r\n        // 配置信息代码需要放在最前面。\r\n        // debug配置\r\n        tools_1.default.getUrlParams(\"zybdebugger\") && (config_.__debug = true);\r\n        // 初始化conf\r\n        config_ && config_1.default.setConfig(config_);\r\n        //获取系统基本信息。\r\n        this.baseSysInfo = tools_1.default.getSysInfo(config_ ? config_.extColumn : null);\r\n        //全局错误收集。\r\n        this.win[\"errorCollect\"] = err_1.default;\r\n        if (tools_1.default.isHitFiltered(tools_1.default.getUrl(), config_1.default.__ignoreUrlKeyWord)) {\r\n            return;\r\n        }\r\n        this.regAndTrigger();\r\n    };\r\n    return RegCenter;\r\n}());\r\nexports.default = RegCenter;\r\n"],"sourceRoot":""}